"use strict";var WORLD_SIDE_SIZE=7,WINDOW_HEIGHT=window.innerHeight,WINDOW_WIDTH=window.innerWidth,ROAD_COLORS=[16711680,16746496,16776960,65280,65535,255,16711935],NUMBER_COLORS=ROAD_COLORS.length,WORLD_HEIGHT=1e3,WORLD_WIDTH=100,TOP_CAMERA_DIST=50,CAR_SIZE_X=10,CAR_SIZE_Y=10,CAR_SIZE_Z=10,NotMarioKart=function(){function e(){var e=Player.playerObject,t={x:e.position.x,y:e.position.y,z:e.position.z,id:Player.playerId};socket.emit("playerStatus",t)}function t(){socket.emit("gameStart","Started");setInterval(e,1e3)}function o(){var e=new THREE.CatmullRomCurve3([new THREE.Vector3(0,0,0),new THREE.Vector3(0,500,0),new THREE.Vector3(-200,500,0),new THREE.Vector3(-200,800,0),new THREE.Vector3(600,800,0),new THREE.Vector3(600,500,0),new THREE.Vector3(300,500,0),new THREE.Vector3(300,0,0),new THREE.Vector3(800,0,0),new THREE.Vector3(800,-500,0),new THREE.Vector3(0,-500,0)]);e.closed=!0;for(var t={steps:100,extrudePath:e},o=new THREE.Shape([new THREE.Vector2(2*CAR_SIZE_Y,0),new THREE.Vector2(0,5*CAR_SIZE_X),new THREE.Vector2(0,-5*CAR_SIZE_X)]),n=new THREE.ExtrudeGeometry(o,t),a=[],i=0;i<NUMBER_COLORS;i++)a.push(new THREE.MeshBasicMaterial({color:ROAD_COLORS[i],side:THREE.DoubleSide}));for(var E=n.faces.length/2,d=0;d<E;d++){var l=2*d;n.faces[l].materialIndex=(d+Math.floor(d/WORLD_SIDE_SIZE))%NUMBER_COLORS,n.faces[l+1].materialIndex=(d+Math.floor(d/WORLD_SIDE_SIZE))%NUMBER_COLORS}var I=new THREE.Mesh(n,a);I.rotateX(-Math.PI/2),I.position.y=0,r.add(I)}function n(){requestAnimationFrame(n),a.clear(),a.setViewport(0,0,WINDOW_WIDTH,WINDOW_HEIGHT),a.render(r,Player.getCamera()),i.clear(),i.setViewport(0,0,WINDOW_WIDTH/4,WINDOW_HEIGHT/4),i.render(r,E),Player.doMovementLoop(),E.position.z=Player.playerObject.position.z}var r=new THREE.Scene,a=new THREE.WebGLRenderer,i=new THREE.WebGLRenderer,E=new THREE.OrthographicCamera(-WINDOW_WIDTH,WINDOW_WIDTH,WINDOW_HEIGHT,-WINDOW_HEIGHT,TOP_CAMERA_DIST-50,TOP_CAMERA_DIST+50);return{init:function(){a.setSize(WINDOW_WIDTH,WINDOW_HEIGHT),a.setPixelRatio(window.devicePixelRatio),a.domElement.style.position="fixed",document.body.appendChild(a.domElement),a.autoClear=!1,i.setSize(WINDOW_WIDTH/4,WINDOW_HEIGHT/4),i.setPixelRatio(window.devicePixelRatio),i.domElement.style.position="fixed",i.domElement.style.top="5%",i.domElement.style.left="70%",i.domElement.style.zIndex="2",i.domElement.style.outline="white solid",document.body.appendChild(i.domElement),i.autoClear=!1,E.position.y=TOP_CAMERA_DIST,E.rotation.x=-90*Math.PI/180,o(),r.add(Player.playerObject),t(),n()}}}(),Player=function(){function e(e){e=e||event,R[e.which]="keydown"===e.type}var t=new THREE.PerspectiveCamera(75,WINDOW_WIDTH/WINDOW_HEIGHT,.1,1e3),o=new THREE.PerspectiveCamera(75,WINDOW_WIDTH/WINDOW_HEIGHT,.1,1e3),n=o,r=function(){var e=(new THREE.ObjectLoader).parse(playerCar);return o.position.y=10*e.scale.y,o.position.z=-20*e.scale.z,o.rotateY(180*Math.PI/180),e.add(t),e.add(o),e}(),a={movement:{arrows:{up:38,down:40,left:37,right:39},wasd:{up:87,down:83,left:65,right:68}},switchCamera:67,reset:8},i=a.movement.arrows,E=1,d=5,l=.05,I=.1,R={};return document.addEventListener("keydown",e,!1),document.addEventListener("keyup",e,!1),{doMovementLoop:function(e){R[i.up]&&E<d&&(E+=l),R[i.left]&&r.rotateY(R[i.down]?-I:I),R[i.right]&&r.rotateY(R[i.down]?I:-I),R[i.down]&&E>.1&&(E-=l),r.translateZ(E),R[a.switchCamera]&&(n=n===t?o:t,R[a.switchCamera]=!1),R[a.reset]&&(r.rotation.y=0,r.position.set(0,r.position.y,0))},playerObject:r,getCamera:function(){return n},playerId:null}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnN0YW50cy5qcyIsIk5vdE1hcmlvS2FydC5qcyIsIlBsYXllci5qcyJdLCJuYW1lcyI6WyJXT1JMRF9TSURFX1NJWkUiLCJXSU5ET1dfSEVJR0hUIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJXSU5ET1dfV0lEVEgiLCJpbm5lcldpZHRoIiwiUk9BRF9DT0xPUlMiLCJOVU1CRVJfQ09MT1JTIiwibGVuZ3RoIiwiV09STERfSEVJR0hUIiwiV09STERfV0lEVEgiLCJUT1BfQ0FNRVJBX0RJU1QiLCJDQVJfU0laRV9YIiwiQ0FSX1NJWkVfWSIsIkNBUl9TSVpFX1oiLCJOb3RNYXJpb0thcnQiLCJlbWl0UGxheWVySW5mbyIsInAiLCJQbGF5ZXIiLCJwbGF5ZXJPYmplY3QiLCJpbmZvIiwieCIsInBvc2l0aW9uIiwieSIsInoiLCJpZCIsInBsYXllcklkIiwic29ja2V0IiwiZW1pdCIsImluaXRTb2NrZXRFdmVudCIsInNldEludGVydmFsIiwiYnVpbGRGbG9vciIsImN1cnZlIiwiVEhSRUUiLCJDYXRtdWxsUm9tQ3VydmUzIiwiVmVjdG9yMyIsImNsb3NlZCIsImV4dHJ1ZGVTZXR0aW5ncyIsInN0ZXBzIiwiZXh0cnVkZVBhdGgiLCJzaGFwZSIsIlNoYXBlIiwiVmVjdG9yMiIsImdlb21ldHJ5IiwiRXh0cnVkZUdlb21ldHJ5IiwibWF0ZXJpYWxzIiwiaSIsInB1c2giLCJNZXNoQmFzaWNNYXRlcmlhbCIsImNvbG9yIiwic2lkZSIsIkRvdWJsZVNpZGUiLCJnZW9GYWNlc0xlbmd0aCIsImZhY2VzIiwiaiIsIm1hdGVyaWFsSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJNZXNoIiwicm90YXRlWCIsIlBJIiwic2NlbmUiLCJhZGQiLCJsb29wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyZXIiLCJjbGVhciIsInNldFZpZXdwb3J0IiwicmVuZGVyIiwiZ2V0Q2FtZXJhIiwibWluaU1hcFJlbmRlcmVyIiwibWluaU1hcENhbWVyYSIsImRvTW92ZW1lbnRMb29wIiwiU2NlbmUiLCJXZWJHTFJlbmRlcmVyIiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiaW5pdCIsInNldFNpemUiLCJzZXRQaXhlbFJhdGlvIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImRvbUVsZW1lbnQiLCJzdHlsZSIsImRvY3VtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiYXV0b0NsZWFyIiwidG9wIiwibGVmdCIsInpJbmRleCIsIm91dGxpbmUiLCJyb3RhdGlvbiIsIm9uS2V5TW92ZSIsImUiLCJldmVudCIsImtleUNvZGVNYXAiLCJ3aGljaCIsInR5cGUiLCJwb3ZDYW1lcmEiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsInRyYWNraW5nQ2FtZXJhIiwiY3VycmVudENhbWVyYSIsIm9iamVjdCIsIk9iamVjdExvYWRlciIsInBhcnNlIiwicGxheWVyQ2FyIiwic2NhbGUiLCJyb3RhdGVZIiwibWFrZVBsYXllck9iamVjdCIsImNvbnRyb2xzIiwibW92ZW1lbnQiLCJhcnJvd3MiLCJ1cCIsImRvd24iLCJyaWdodCIsIndhc2QiLCJzd2l0Y2hDYW1lcmEiLCJyZXNldCIsImVuYWJsZWRDb250cm9scyIsInNwZWVkIiwibWF4U3BlZWQiLCJhY2NlbGVyYXRpb24iLCJyb3RhdGlvblNwZWVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdyb3VwQmxvY2tzIiwidHJhbnNsYXRlWiIsInNldCJdLCJtYXBwaW5ncyI6ImFBSUEsSUFBTUEsZ0JBQWtCLEVBQ2xCQyxjQUFnQkMsT0FBT0MsWUFDdkJDLGFBQWVGLE9BQU9HLFdBQ3RCQyxhQUNGLFNBQ0EsU0FDQSxTQUNBLE1BQ0EsTUFDQSxJQUNBLFVBRUVDLGNBQWdCRCxZQUFZRSxPQUM1QkMsYUFBZSxJQUNmQyxZQUFjLElBQ2RDLGdCQUFrQixHQUNsQkMsV0FBYSxHQUNiQyxXQUFhLEdBQ2JDLFdBQWEsR0NsQmJDLGFBQWdCLFdBYWxCLFNBQVNDLElBQ0wsSUFBSUMsRUFBSUMsT0FBT0MsYUFFWEMsR0FBUUMsRUFBSUosRUFBRUssU0FBU0QsRUFDZkUsRUFB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QUNJQyxHQUFJLEdBQ0pDLEtBQU0sR0FDTnpCLEtBQU0sR0FDTjBCLE1BQU8sSUFFWEMsTUFDSUgsR0FBSSxHQUNKQyxLQUFNLEdBQ056QixLQUFNLEdBQ04wQixNQUFPLEtBR2ZFLGFBQWMsR0FDZEMsTUFBTyxHQUdQQyxFQUFrQlQsRUFBU0MsU0FBU0MsT0FFcENRLEVBQVEsRUFDUkMsRUFBVyxFQUNUQyxFQUFlLElBQ2ZDLEVBQWdCLEdBRWhCM0IsS0F5Rk4sT0FsRkFaLFNBQVN3QyxpQkFBaUIsVUFBVy9CLEdBQVcsR0FDaERULFNBQVN3QyxpQkFBaUIsUUFBUy9CLEdBQVcsSUFrRjFDbkIsZUFoRkosU0FBd0JtRCxHQUNoQjdCLEVBQVd1QixFQUFnQk4sS0FDeEJPLEVBQU1DLElBQ0xELEdBQVNFLEdBS2IxQixFQUFXdUIsRUFBZ0I5QixPQUMzQnBFLEVBQWF1RixRQUNUWixFQUFXdUIsRUFBZ0JMLE9BQ3BCUyxFQUNEQSxHQUdWM0IsRUFBV3VCLEVBQWdCSixRQUMzQjlGLEVBQWF1RixRQUNUWixFQUFXdUIsRUFBZ0JMLE1BQ3JCUyxHQUNDQSxHQUdYM0IsRUFBV3VCLEVBQWdCTCxPQUN4Qk0sRUFBTSxLQUNMQSxHQUFTRSxHQUlqQnJHLEVBQWF5RyxXQUFXTixHQUNwQnhCLEVBQVdjLEVBQVNPLGdCQUVoQmYsRUFEQUEsSUFBa0JILEVBQ0ZFLEVBRUFGLEVBRXBCSCxFQUFXYyxFQUFTTyxlQUFnQixHQUVwQ3JCLEVBQVdjLEVBQVNRLFNBQ3BCakcsRUFBYXVFLFNBQVNuRSxFQUFJLEVBQzFCSixFQUFhRyxTQUFTdUcsSUFBSSxFQUFHMUcsRUFBYUcsU0FBU0MsRUFBRyxLQTBDMURKLGFBQWNBLEVBQ2RrRCxVQS9IWSxXQUNaLE9BQU8rQixHQStIUDFFLFNBM0hXLE1BckJIIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFsbCBjb25zdGFudHMsIGF2YWlsYWJsZSBpbiBnbG9iYWwgd2luZG93LlxuICovXG5cbmNvbnN0IFdPUkxEX1NJREVfU0laRSA9IDc7XG5jb25zdCBXSU5ET1dfSEVJR0hUID0gd2luZG93LmlubmVySGVpZ2h0O1xuY29uc3QgV0lORE9XX1dJRFRIID0gd2luZG93LmlubmVyV2lkdGg7XG5jb25zdCBST0FEX0NPTE9SUyA9IFtcbiAgICAweGZmMDAwMCxcbiAgICAweGZmODgwMCxcbiAgICAweGZmZmYwMCxcbiAgICAweDAwZmYwMCxcbiAgICAweDAwZmZmZixcbiAgICAweDAwMDBmZixcbiAgICAweGZmMDBmZlxuXTtcbmNvbnN0IE5VTUJFUl9DT0xPUlMgPSBST0FEX0NPTE9SUy5sZW5ndGg7XG5jb25zdCBXT1JMRF9IRUlHSFQgPSAxMDAwO1xuY29uc3QgV09STERfV0lEVEggPSAxMDA7XG5jb25zdCBUT1BfQ0FNRVJBX0RJU1QgPSA1MDtcbmNvbnN0IENBUl9TSVpFX1ggPSAxMDtcbmNvbnN0IENBUl9TSVpFX1kgPSAxMDtcbmNvbnN0IENBUl9TSVpFX1ogPSAxMDtcbiIsIi8qKlxuICogTWFpbiBmaWxlIG9mIHRoZSBnYW1lLlxuICovXG5cbmNvbnN0IE5vdE1hcmlvS2FydCA9IChmdW5jdGlvbigpIHtcbiAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcbiAgICBjb25zdCBtaW5pTWFwUmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xuICAgIGNvbnN0IG1pbmlNYXBDYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKFxuICAgICAgICAtV0lORE9XX1dJRFRILFxuICAgICAgICBXSU5ET1dfV0lEVEgsXG4gICAgICAgIFdJTkRPV19IRUlHSFQsXG4gICAgICAgIC1XSU5ET1dfSEVJR0hULFxuICAgICAgICBUT1BfQ0FNRVJBX0RJU1QgLSA1MCxcbiAgICAgICAgVE9QX0NBTUVSQV9ESVNUICsgNTBcbiAgICApO1xuXG4gICAgZnVuY3Rpb24gZW1pdFBsYXllckluZm8oKXtcbiAgICAgICAgbGV0IHAgPSBQbGF5ZXIucGxheWVyT2JqZWN0O1xuXG4gICAgICAgIGxldCBpbmZvID0geyd4JzpwLnBvc2l0aW9uLngsXG4gICAgICAgICAgICAgICAgICAgICd5JzpwLnBvc2l0aW9uLnksXG4gICAgICAgICAgICAgICAgICAgICd6JzpwLnBvc2l0aW9uLnosXG4gICAgICAgICAgICAgICAgICAgICdpZCc6IFBsYXllci5wbGF5ZXJJZH07XG4gICAgICAgIHNvY2tldC5lbWl0KCdwbGF5ZXJTdGF0dXMnLGluZm8pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRTb2NrZXRFdmVudCgpe1xuICAgICAgICBzb2NrZXQuZW1pdCgnZ2FtZVN0YXJ0JywnU3RhcnRlZCcpO1xuICAgICAgICB2YXIgdCA9IHNldEludGVydmFsKGVtaXRQbGF5ZXJJbmZvLDEwMDApO1xuICAgICAgICAvLyBjbGVhckludGVydmFsKHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkRmxvb3IoKSB7XG4gICAgICAgIGxldCBjdXJ2ZSA9IG5ldyBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzKFtcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMCwgNTAwLCAwKSxcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC0yMDAsIDUwMCwgMCksXG4gICAgICAgICAgICBuZXcgVEhSRUUuVmVjdG9yMygtMjAwLCA4MDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoNjAwLCA4MDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoNjAwLCA1MDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMzAwLCA1MDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMzAwLCAwLCAwKSxcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDgwMCwgMCwgMCksXG4gICAgICAgICAgICBuZXcgVEhSRUUuVmVjdG9yMyg4MDAsIC01MDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMCwgLTUwMCwgMClcbiAgICAgICAgXSk7XG4gICAgICAgIGN1cnZlLmNsb3NlZCA9IHRydWU7XG5cbiAgICAgICAgbGV0IGV4dHJ1ZGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIHN0ZXBzOiAxMDAsXG4gICAgICAgICAgICBleHRydWRlUGF0aDogY3VydmVcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTaGFwZSB0aGF0IGdldHMgZXh0cnVkZWQgdGhyb3VnaCB0aGUgY3VydmVcbiAgICAgICAgbGV0IHNoYXBlID0gbmV3IFRIUkVFLlNoYXBlKFtcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IyKDIgKiBDQVJfU0laRV9ZLCAwKSxcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IyKDAsIDUgKiBDQVJfU0laRV9YKSxcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IyKDAsIC01ICogQ0FSX1NJWkVfWClcbiAgICAgICAgXSk7XG5cbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeShzaGFwZSwgZXh0cnVkZVNldHRpbmdzKTtcblxuICAgICAgICBsZXQgbWF0ZXJpYWxzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTlVNQkVSX0NPTE9SUzsgaSsrKSB7XG4gICAgICAgICAgICBtYXRlcmlhbHMucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogUk9BRF9DT0xPUlNbaV0sXG4gICAgICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcbiAgICAgICAgICAgICAgICAgICAgLy93aXJlZnJhbWU6IHRydWUgLy8gVGhpcyBtYWtlcyB0cmFjayBtb3JlIFRyb24tbGlrZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlb0ZhY2VzTGVuZ3RoID0gZ2VvbWV0cnkuZmFjZXMubGVuZ3RoIC8gMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9GYWNlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaiA9IGkgKiAyOyAvLyA8LS0gQWRkZWQgdGhpcyBiYWNrIHNvIHdlIGNhbiBkbyBldmVyeSBvdGhlciAnZmFjZSdcblxuICAgICAgICAgICAgZ2VvbWV0cnkuZmFjZXNbal0ubWF0ZXJpYWxJbmRleCA9XG4gICAgICAgICAgICAgICAgKGkgKyBNYXRoLmZsb29yKGkgLyBXT1JMRF9TSURFX1NJWkUpKSAlIE5VTUJFUl9DT0xPUlM7XG5cbiAgICAgICAgICAgIGdlb21ldHJ5LmZhY2VzW2ogKyAxXS5tYXRlcmlhbEluZGV4ID1cbiAgICAgICAgICAgICAgICAoaSArIE1hdGguZmxvb3IoaSAvIFdPUkxEX1NJREVfU0laRSkpICUgTlVNQkVSX0NPTE9SUzsgLy8gT3RoZXIgaGFsZiBvZiB0aGUgc2FtZSBmYWNlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmxvb3IgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWxzKTtcbiAgICAgICAgZmxvb3Iucm90YXRlWCgtTWF0aC5QSSAvIDIpO1xuICAgICAgICBmbG9vci5wb3NpdGlvbi55ID0gMDtcblxuICAgICAgICBzY2VuZS5hZGQoZmxvb3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHJlbmRlcmVyLnNldFNpemUoV0lORE9XX1dJRFRILCBXSU5ET1dfSEVJR0hUKTtcbiAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIHJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICByZW5kZXJlci5hdXRvQ2xlYXIgPSBmYWxzZTtcblxuICAgICAgICBtaW5pTWFwUmVuZGVyZXIuc2V0U2l6ZShXSU5ET1dfV0lEVEggLyA0LCBXSU5ET1dfSEVJR0hUIC8gNCk7XG4gICAgICAgIG1pbmlNYXBSZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgbWluaU1hcFJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICBtaW5pTWFwUmVuZGVyZXIuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnNSUnO1xuICAgICAgICBtaW5pTWFwUmVuZGVyZXIuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzcwJSc7XG4gICAgICAgIG1pbmlNYXBSZW5kZXJlci5kb21FbGVtZW50LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgbWluaU1hcFJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUub3V0bGluZSA9ICd3aGl0ZSBzb2xpZCc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWluaU1hcFJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICBtaW5pTWFwUmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XG5cbiAgICAgICAgbWluaU1hcENhbWVyYS5wb3NpdGlvbi55ID0gVE9QX0NBTUVSQV9ESVNUO1xuICAgICAgICBtaW5pTWFwQ2FtZXJhLnJvdGF0aW9uLnggPSAtOTAgKiBNYXRoLlBJIC8gMTgwO1xuXG4gICAgICAgIGJ1aWxkRmxvb3IoKTtcblxuICAgICAgICBzY2VuZS5hZGQoUGxheWVyLnBsYXllck9iamVjdCk7XG4gICAgICAgIGluaXRTb2NrZXRFdmVudCgpO1xuICAgICAgICBsb29wKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuXG4gICAgICAgIHJlbmRlcmVyLmNsZWFyKCk7XG4gICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KDAsIDAsIFdJTkRPV19XSURUSCwgV0lORE9XX0hFSUdIVCk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgUGxheWVyLmdldENhbWVyYSgpKTtcblxuICAgICAgICBtaW5pTWFwUmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgbWluaU1hcFJlbmRlcmVyLnNldFZpZXdwb3J0KDAsIDAsIFdJTkRPV19XSURUSCAvIDQsIFdJTkRPV19IRUlHSFQgLyA0KTtcbiAgICAgICAgbWluaU1hcFJlbmRlcmVyLnJlbmRlcihzY2VuZSwgbWluaU1hcENhbWVyYSk7XG5cbiAgICAgICAgUGxheWVyLmRvTW92ZW1lbnRMb29wKCk7XG4gICAgICAgIG1pbmlNYXBDYW1lcmEucG9zaXRpb24ueiA9IFBsYXllci5wbGF5ZXJPYmplY3QucG9zaXRpb24uejtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbn0pKCk7XG4iLCIvKipcbiAqIEV2ZXJ5dGhpbmcgYWJvdXQgdGhlIFBsYXllciBvYmplY3QsIGl0cyBjYW1lcmEsIHRoZSBtb3ZlbWVudHMgLi4uXG4gKi9cblxuY29uc3QgUGxheWVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHBvdkNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShcbiAgICAgICAgNzUsXG4gICAgICAgIFdJTkRPV19XSURUSCAvIFdJTkRPV19IRUlHSFQsXG4gICAgICAgIDAuMSxcbiAgICAgICAgMTAwMFxuICAgICk7XG5cbiAgICBjb25zdCB0cmFja2luZ0NhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShcbiAgICAgICAgNzUsXG4gICAgICAgIFdJTkRPV19XSURUSCAvIFdJTkRPV19IRUlHSFQsXG4gICAgICAgIDAuMSxcbiAgICAgICAgMTAwMFxuICAgICk7XG5cbiAgICBsZXQgY3VycmVudENhbWVyYSA9IHRyYWNraW5nQ2FtZXJhO1xuICAgIGxldCBnZXRDYW1lcmEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRDYW1lcmE7XG4gICAgfTtcblxuICAgIGNvbnN0IHBsYXllck9iamVjdCA9IG1ha2VQbGF5ZXJPYmplY3QoKTtcbiAgICB2YXIgcGxheWVySWQgPSBudWxsO1xuXG5cbiAgICBjb25zdCBjb250cm9scyA9IHtcbiAgICAgICAgbW92ZW1lbnQ6IHtcbiAgICAgICAgICAgIC8vIFRPRE86IHRoZXNlIHNob3VsZCBiZSBpbiBhIHNldHRpbmdzIG1lbnUgb25jZSB3ZSBoYXZlIG9uZS5cbiAgICAgICAgICAgIGFycm93czoge1xuICAgICAgICAgICAgICAgIHVwOiAzOCxcbiAgICAgICAgICAgICAgICBkb3duOiA0MCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAzNyxcbiAgICAgICAgICAgICAgICByaWdodDogMzlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3YXNkOiB7XG4gICAgICAgICAgICAgICAgdXA6IDg3LFxuICAgICAgICAgICAgICAgIGRvd246IDgzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDY1LFxuICAgICAgICAgICAgICAgIHJpZ2h0OiA2OFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzd2l0Y2hDYW1lcmE6IDY3LFxuICAgICAgICByZXNldDogOFxuICAgIH07XG5cbiAgICBsZXQgZW5hYmxlZENvbnRyb2xzID0gY29udHJvbHMubW92ZW1lbnQuYXJyb3dzO1xuXG4gICAgbGV0IHNwZWVkID0gMTtcbiAgICBsZXQgbWF4U3BlZWQgPSA1O1xuICAgIGNvbnN0IGFjY2VsZXJhdGlvbiA9IDAuMDU7XG4gICAgY29uc3Qgcm90YXRpb25TcGVlZCA9IDAuMTtcblxuICAgIGNvbnN0IGtleUNvZGVNYXAgPSB7fTtcblxuICAgIGZ1bmN0aW9uIG9uS2V5TW92ZShlKSB7XG4gICAgICAgIGUgPSBlIHx8IGV2ZW50OyAvLyBGb3IgSUUuXG4gICAgICAgIGtleUNvZGVNYXBbZS53aGljaF0gPSBlLnR5cGUgPT09ICdrZXlkb3duJztcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlNb3ZlLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvbktleU1vdmUsIGZhbHNlKTtcblxuICAgIGZ1bmN0aW9uIGRvTW92ZW1lbnRMb29wKGdyb3VwQmxvY2tzKSB7XG4gICAgICAgIGlmIChrZXlDb2RlTWFwW2VuYWJsZWRDb250cm9scy51cF0pIHtcbiAgICAgICAgICAgIGlmKHNwZWVkPG1heFNwZWVkKXtcbiAgICAgICAgICAgICAgICBzcGVlZCArPSBhY2NlbGVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gc3BlZWQgPSBNYXRoLkNsYW1wKHNwZWVkLG1heFNwZWVkLFRpbWUudGltZURlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHBsYXllck9iamVjdC50cmFuc2xhdGVaKHNwZWVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5Q29kZU1hcFtlbmFibGVkQ29udHJvbHMubGVmdF0pIHtcbiAgICAgICAgICAgIHBsYXllck9iamVjdC5yb3RhdGVZKFxuICAgICAgICAgICAgICAgIGtleUNvZGVNYXBbZW5hYmxlZENvbnRyb2xzLmRvd25dXG4gICAgICAgICAgICAgICAgICAgID8gLXJvdGF0aW9uU3BlZWRcbiAgICAgICAgICAgICAgICAgICAgOiByb3RhdGlvblNwZWVkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXlDb2RlTWFwW2VuYWJsZWRDb250cm9scy5yaWdodF0pIHtcbiAgICAgICAgICAgIHBsYXllck9iamVjdC5yb3RhdGVZKFxuICAgICAgICAgICAgICAgIGtleUNvZGVNYXBbZW5hYmxlZENvbnRyb2xzLmRvd25dXG4gICAgICAgICAgICAgICAgICAgID8gcm90YXRpb25TcGVlZFxuICAgICAgICAgICAgICAgICAgICA6IC1yb3RhdGlvblNwZWVkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXlDb2RlTWFwW2VuYWJsZWRDb250cm9scy5kb3duXSkge1xuICAgICAgICAgICAgaWYoc3BlZWQ+MC4xKXtcbiAgICAgICAgICAgICAgICBzcGVlZCAtPSBhY2NlbGVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gc3BlZWQgPSBNYXRoZi5DbGFtcChzcGVlZCxtYXhTcGVlZCxUaW1lLnRpbWVEZWx0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGxheWVyT2JqZWN0LnRyYW5zbGF0ZVooc3BlZWQpO1xuICAgICAgICBpZiAoa2V5Q29kZU1hcFtjb250cm9scy5zd2l0Y2hDYW1lcmFdKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENhbWVyYSA9PT0gcG92Q2FtZXJhKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENhbWVyYSA9IHRyYWNraW5nQ2FtZXJhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2FtZXJhID0gcG92Q2FtZXJhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5Q29kZU1hcFtjb250cm9scy5zd2l0Y2hDYW1lcmFdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleUNvZGVNYXBbY29udHJvbHMucmVzZXRdKSB7XG4gICAgICAgICAgICBwbGF5ZXJPYmplY3Qucm90YXRpb24ueSA9IDA7XG4gICAgICAgICAgICBwbGF5ZXJPYmplY3QucG9zaXRpb24uc2V0KDAsIHBsYXllck9iamVjdC5wb3NpdGlvbi55LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZvciAodmFyIGkgPSBncm91cEJsb2Nrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgLy8gbGV0IHBvcyA9IGdyb3VwQmxvY2tzW2ldLnBvc2l0aW9uO1xuICAgIC8vICAgICBsZXQgcG8gPSBwbGF5ZXJPYmplY3QuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMF1cbiAgICAvLyBmb3IgKHZhciB2ZXJ0ZXhJbmRleCA9IDA7IHZlcnRleEluZGV4IDwgcG8uZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoOyB2ZXJ0ZXhJbmRleCsrKVxuICAgIC8vIHsgICAgICAgXG4gICAgLy8gICAgIHZhciBsb2NhbFZlcnRleCA9IHBvLmdlb21ldHJ5LnZlcnRpY2VzW3ZlcnRleEluZGV4XS5jbG9uZSgpO1xuICAgIC8vICAgICB2YXIgZ2xvYmFsVmVydGV4ID0gbG9jYWxWZXJ0ZXguYXBwbHlNYXRyaXhwbGF5ZXJPYmplY3QubWF0cml4Lm11bHRpcGx5VmVjdG9yMygpO1xuICAgIC8vICAgICB2YXIgZGlyZWN0aW9uVmVjdG9yID0gZ2xvYmFsVmVydGV4LnN1YlNlbGYoIHBvLnBvc2l0aW9uICk7XG5cbiAgICAvLyAgICAgdmFyIHJheSA9IG5ldyBUSFJFRS5SYXkoIHBvLnBvc2l0aW9uLCBkaXJlY3Rpb25WZWN0b3IuY2xvbmUoKS5ub3JtYWxpemUoKSApO1xuICAgIC8vICAgICB2YXIgY29sbGlzaW9uUmVzdWx0cyA9IHJheS5pbnRlcnNlY3RPYmplY3RzKCBncm91cEJsb2NrcyApO1xuICAgIC8vICAgICBpZiAoIGNvbGxpc2lvblJlc3VsdHMubGVuZ3RoID4gMCAmJiBjb2xsaXNpb25SZXN1bHRzWzBdLmRpc3RhbmNlIDwgZGlyZWN0aW9uVmVjdG9yLmxlbmd0aCgpICkgXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdwZXJkaXN0cmUnKVxuICAgIC8vICAgICAgICAgLy8gYSBjb2xsaXNpb24gb2NjdXJyZWQuLi4gZG8gc29tZXRoaW5nLi4uXG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG4gICAgICAgICAgICAvLyBpZigocGxheWVyT2JqZWN0LnBvc2l0aW9uLngrNSA8IHBvcy54ICYmIHBsYXllck9iamVjdC5wb3NpdGlvbi56KzUgPCBwb3Mueil8fCAocGxheWVyT2JqZWN0LnBvc2l0aW9uLngtNSA+IHBvcy54ICYmIHBsYXllck9iamVjdC5wb3NpdGlvbi56KzUgPiBwb3MueikpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGdyb3VwQmxvY2tzW2ldKVxuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVBsYXllck9iamVjdCgpIHtcbiAgICAgICAgY29uc3QgbG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlcigpO1xuICAgICAgICBjb25zdCBvYmplY3QgPSBsb2FkZXIucGFyc2UocGxheWVyQ2FyKTtcblxuICAgICAgICB0cmFja2luZ0NhbWVyYS5wb3NpdGlvbi55ID0gb2JqZWN0LnNjYWxlLnkgKiAxMDtcbiAgICAgICAgdHJhY2tpbmdDYW1lcmEucG9zaXRpb24ueiA9IG9iamVjdC5zY2FsZS56ICogLTIwO1xuICAgICAgICAvLyB0cmFja2luZ0NhbWVyYS5yb3RhdGVYKDAgKiBNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgdHJhY2tpbmdDYW1lcmEucm90YXRlWSgxODAgKiBNYXRoLlBJIC8gMTgwKTtcblxuICAgICAgICBvYmplY3QuYWRkKHBvdkNhbWVyYSk7XG4gICAgICAgIG9iamVjdC5hZGQodHJhY2tpbmdDYW1lcmEpO1xuXG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9Nb3ZlbWVudExvb3A6IGRvTW92ZW1lbnRMb29wLFxuICAgICAgICBwbGF5ZXJPYmplY3Q6IHBsYXllck9iamVjdCxcbiAgICAgICAgZ2V0Q2FtZXJhOiBnZXRDYW1lcmEsXG4gICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgIH07XG59KSgpO1xuIl19
